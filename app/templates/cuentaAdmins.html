<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admins | Yadmandul store</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='css/inicioSesion.css')}}"
    />
    <link
      rel="icon"
      href="{{url_for('static', filename='assets/img/logo_definitivo.png')}}"
      type="image/png"
    />
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='css/style.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='css/stylesCuenta.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='css/styleAdmins.css')}}"
    />
    <script
      src="https://kit.fontawesome.com/ecae724dfb.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="aviso-exito">
      <h1>Aviso</h1>
      <p>Modificación completada con éxito</p>
      <a id="close-aviso-exito">Cerrar</a>
    </div>
    <div class="aviso-fracaso">
      <h1>Aviso</h1>
      <p>Error para completar la modificación</p>
      <a id="close-aviso-fracaso">Cerrar</a>
    </div>
    <header>
      <div class="title-container">
        <a href="#"
          ><img
            src="{{url_for('static', filename='assets/img/logo_definitivo.png')}}"
            alt="logo"
        /></a>
        <p>ADMIN {{user.name}} | Yadmandul store</p>
      </div>
      <nav>
        <ul>
          <li>
            <a href="/logout">
              <i class="fa-solid fa-right-from-bracket"></i
              >&nbsp;&nbsp;&nbsp;Cerrar sesión
            </a>
          </li>
        </ul>
      </nav>
    </header>
    <aside>
      <nav>
        <ul>
          <li>
            <a href="#" id="btn-profile"
              ><i class="fa-solid fa-user"></i>&nbsp;&nbsp;&nbsp;Mi perfil</a
            >
          </li>
          <li>
            <a href="#" id="btn-employees" style="font-size: 1em"
              ><i class="fa-solid fa-user-tie"></i
              >&nbsp;&nbsp;&nbsp;Empleados</a
            >
          </li>
          <li>
            <a href="#" id="btn-clients"
              ><i class="fa-solid fa-users"></i>&nbsp;&nbsp;&nbsp;Clientes</a
            >
          </li>
          <li>
            <a href="#" id="btn-proveedores" style="font-size: 1em"
              ><i class="fa-brands fa-shopify"></i
              >&nbsp;&nbsp;&nbsp;Proveedores</a
            >
          </li>
        </ul>
      </nav>
    </aside>
    <main>
      <div class="user-data">
        <img
          src="{{url_for('static', filename=user.photo)}}"
          alt="{{user.name}}"
        /><br />
        <form
          enctype="multipart/form-data"
          action="/upload_img_admin"
          method="POST"
          id="form-modify_photo_admin"
        >
          <input type="file" accept="image/*" name="photo" />
          <input type="submit" value="Cambiar foto" , id="btn-change-photo" />
        </form>
        <h2>{{user.name}}</h2>
        <h3>{{user.correo}}</h3>
        <div class="user-modify-data">
          <form
            action="/modify_name_admin"
            ,
            method="POST"
            ,
            id="form-modify_name_admin"
          >
            <div class="name-container">
              <h4>
                <i class="fa-solid fa-signature"></i>&nbsp;&nbsp;&nbsp;Nombre
              </h4>
              <input type="text" placeholder="{{user.name}}" name="name" />
              <input type="submit" value="Modificar" />
            </div>
          </form>
          <form
            action="/modify_appat_admin"
            method="POST"
            id="form-modify_appat_admin"
          >
            <div class="name-container">
              <h4>
                <i class="fa-solid fa-signature"></i>&nbsp;&nbsp;&nbsp;Apellido
                paterno
              </h4>
              <input type="text" placeholder="{{user.ap_pat}}" name="appat" />
              <input type="submit" value="Modificar" />
            </div>
          </form>
          <form
            action="/modify_apmat_admin"
            ,
            method="POST"
            ,
            id="form-modify_apmat_admin"
          >
            <div class="name-container">
              <h4>
                <i class="fa-solid fa-signature"></i>&nbsp;&nbsp;&nbsp;Apellido
                materno
              </h4>
              <input type="text" placeholder="{{user.ap_mat}}" name="apmat" />
              <input type="submit" value="Modificar" />
            </div>
          </form>
          <form
            action="/modify_fechanac_admin"
            method="POST"
            id="form-modify_fechanac_admin"
          >
            <div class="name-container">
              <h4>
                <i class="fa-solid fa-signature"></i>&nbsp;&nbsp;&nbsp;Fecha de
                nacimiento
              </h4>
              <p>Fecha registrada: {{user.fecha_nac}}</p>
              <input type="date" name="fechanac" />
              <input type="submit" value="Modificar" />
            </div>
          </form>
          <form
            action="/modify_correo_admin"
            method="POST"
            ,
            id="form-modify_correo_admin"
          >
            <div class="name-container">
              <h4>
                <i class="fa-solid fa-envelope"></i>&nbsp;&nbsp;&nbsp;Correo
                electrónico
              </h4>
              <input type="email" placeholder="{{user.correo}}" name="correo" />
              <input type="submit" value="Modificar" />
            </div>
          </form>
          <form
            action="/modify_password_admin"
            ,
            method="POST"
            ,
            id="form-modify_password_admin"
          >
            <div class="name-container">
              <h4><i class="fa-solid fa-key"></i>&nbsp;&nbsp;&nbsp;Password</h4>
              <input type="password" name="password" />
              <input type="submit" value="Modificar" />
            </div>
          </form>
        </div>
      </div>
      <div class="employees-container">
        <h1>Empleados</h1>
        <input type="search" id="buscar_employees" placeholder="Buscar" />
        <input type="checkbox" id="mostrarActivos_employees" checked />Mostrar
        activos
        <input type="checkbox" id="mostrarInactivos_employees" checked />Mostrar
        inactivos
        <table>
          <tr>
            <th>Foto</th>
            <th>Nombre completo</th>
            <th>Fecha de nacimiento</th>
            <th>Correo electrónico</th>
            <th>Acción</th>
          </tr>
          {% for empleado in empleados %}
          <tr
            class="{{ 'activo' if empleado.5 else 'inactivo' }}"
            data-nombre-emp="{{ empleado.2 }}"
          >
            <td>
              <img
                src="{{url_for('static', filename=empleado.1)}}"
                alt="Foto del empleado"
                id="employee-photo"
              />
            </td>
            <td>{{empleado.2}}</td>
            <td>{{empleado.3}}</td>
            <td>{{empleado.4}}</td>
            <td>
              {% if empleado.5 %}
              <form
                action="{{ url_for('admin.dar_de_baja_emp', id=empleado[0]) }}"
                method="POST"
              >
                <input type="submit" value="Dar de baja" />
              </form>
              {% else %}
              <form
                action="{{ url_for('admin.dar_de_alta_emp', id=empleado[0]) }}"
                method="POST"
              >
                <input type="submit" value="Dar de alta" />
              </form>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </table>
      </div>
      <div class="clients-container">
        <h1>Clientes</h1>
        <input type="search" id="buscar_cli" placeholder="Buscar" />
        <input type="checkbox" id="mostrarActivos_cli" checked />Mostrar activos
        <input type="checkbox" id="mostrarInactivos_cli" checked />Mostrar
        inactivos
        <table>
          <tr>
            <th>Foto</th>
            <th>Nombre completo</th>
            <th>Fecha de nacimiento</th>
            <th>Correo electrónico</th>
            <th>Acción</th>
          </tr>
          {% for cliente in clientes %}
          <tr
            class="{{ 'activo' if cliente.5 else 'inactivo' }}"
            data-nombre-cli="{{ cliente.2 }}"
          >
            <td>
              <img
                src="{{url_for('static', filename=cliente.1)}}"
                alt="Foto del cliente"
                id="client-photo"
              />
            </td>
            <td>{{cliente.2}}</td>
            <td>{{cliente.3}}</td>
            <td>{{cliente.4}}</td>
            <td>
              {% if cliente.5 %}
              <form
                action="{{ url_for('admin.dar_de_baja_cli', id=cliente[0]) }}"
                method="POST"
              >
                <input type="submit" value="Dar de baja" />
              </form>
              {% else %}
              <form
                action="{{ url_for('admin.dar_de_alta_cli', id=cliente[0]) }}"
                method="POST"
              >
                <input type="submit" value="Dar de alta" />
              </form>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </table>
      </div>
      <div class="proveedores-container">
        <h1>Proveedores</h1>
        <h2>Registro de proveedores</h2>
        <form
          action="/insert_proveedores"
          method="POST"
          id="form-insert_proveedores"
        >
          <label>Nombre</label>
          <input type="text" name="nom_prov" required />
          <br />
          <label>Apellido paterno</label>
          <input type="text" name="ap_pat_prov" required />
          <br />
          <label>Apellido materno</label>
          <input type="text" name="ap_mat_prov" required />
          <br />
          <label>Correo electrónico</label>
          <input type="email" name="correo_prov" required />
          <br />
          <label>Teléfono</label>
          <input type="text" name="tel_prov" required />
          <br />
          <input
            type="submit"
            value="Registrar"
            style="margin-top: 10px; margin-bottom: 10px"
          />
        </form>
        <input type="search" id="buscar_prov" placeholder="Buscar" />
        <table>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Apellido paterno</th>
            <th>Apellido materno</th>
            <th>Correo electrónico</th>
            <th>Teléfono</th>
            <th>Modificar</th>
          </tr>
          {% for proveedor in proveedores %}
          <tr data-nombre-prov="{{proveedor.1}}">
            <form
              action="{{url_for('admin.modify_prov', id=proveedor.0)}}"
              method="POST"
              class="form-modify_prov"
              data-id="{{proveedor.0}}"
            >
              <td>{{proveedor.0}}</td>
              <td>
                <input type="text" , name="nom_prov" value="{{proveedor.1}}" />
              </td>
              <td>
                <input type="text" name="ap_pat_prov" value="{{proveedor.2}}" />
              </td>
              <td>
                <input type="text" name="ap_mat_prov" value="{{proveedor.3}}" />
              </td>
              <td>
                <input
                  type="email"
                  name="correo_prov"
                  value="{{proveedor.4}}"
                />
              </td>
              <td>
                <input type="number" name="tel_prov" value="{{proveedor.5}}" />
              </td>
              <td>
                <input type="submit" value="Modificar" />
              </td>
            </form>
          </tr>
          {% endfor %}
        </table>
      </div>
    </main>
    <script src="{{url_for('static', filename='js/scriptFotoPerfil.js')}}"></script>
    <script>
      const $btnProfile = document.getElementById("btn-profile");
      const $btnEmployees = document.getElementById("btn-employees");
      const $btnClients = document.getElementById("btn-clients");
      const $btnProveedores = document.getElementById("btn-proveedores");
      const $employeesContainer = document.querySelector(
        ".employees-container"
      );
      const $userData = document.querySelector(".user-data");
      const $clientsContainer = document.querySelector(".clients-container");
      const $proveedoresContainer = document.querySelector(
        ".proveedores-container"
      );

      function profile() {
        $userData.style.display = "block";
        $employeesContainer.style.display = "none";
        $clientsContainer.style.display = "none";
        $proveedoresContainer.style.display = "none";
        $btnProfile.classList.add("btn-aside-active");
        $btnEmployees.classList.remove("btn-aside-active");
        $btnClients.classList.remove("btn-aside-active");
        $btnProveedores.classList.remove("btn-aside-active");
      }
      window.onload = profile;
      $btnProfile.addEventListener("click", () => {
        $userData.style.display = "block";
        $employeesContainer.style.display = "none";
        $clientsContainer.style.display = "none";
        $proveedoresContainer.style.display = "none";
        //$ordersContainer.style.display = "none";
        $btnProfile.classList.add("btn-aside-active");
        // $main.classList.remove("main-purchases");
        // $main.classList.add("main-user-data");
        $btnEmployees.classList.remove("btn-aside-active");
        $btnProveedores.classList.remove("btn-aside-active");
        $btnClients.classList.remove("btn-aside-active");
        $btnProfile.classList.add("btn-aside-active:hover");
        $btnEmployees.classList.remove("btn-aside-active:hover");
        $btnClients.classList.remove("btn-aside-active:hover");
        $btnProveedores.classList.remove("btn-aside-active:hover");
        //$btnOrders.classList.remove("btn-aside-active");
      });
      $btnEmployees.addEventListener("click", () => {
        $userData.style.display = "none";
        $employeesContainer.style.display = "block";
        $clientsContainer.style.display = "none";
        $proveedoresContainer.style.display = "none";
        $btnProfile.classList.remove("btn-aside-active");
        $btnEmployees.classList.add("btn-aside-active");
        $btnProveedores.classList.remove("btn-aside-active");
        $btnClients.classList.remove("btn-aside-active");
        $btnProfile.classList.remove("btn-aside-active:hover");
        $btnEmployees.classList.add("btn-aside-active:hover");
        $btnClients.classList.remove("btn-aside-active:hover");
        $btnProveedores.classList.remove("btn-aside-active:hover");
      });
      $btnClients.addEventListener("click", () => {
        $userData.style.display = "none";
        $employeesContainer.style.display = "none";
        $clientsContainer.style.display = "block";
        $proveedoresContainer.style.display = "none";
        $btnProfile.classList.remove("btn-aside-active");
        $btnEmployees.classList.remove("btn-aside-active");
        $btnProveedores.classList.remove("btn-aside-active");
        $btnClients.classList.add("btn-aside-active");
        $btnProfile.classList.remove("btn-aside-active:hover");
        $btnEmployees.classList.remove("btn-aside-active:hover");
        $btnClients.classList.add("btn-aside-active:hover");
        $btnProveedores.classList.remove("btn-aside-active:hover");
      });
      $btnProveedores.addEventListener("click", () => {
        $userData.style.display = "none";
        $employeesContainer.style.display = "none";
        $clientsContainer.style.display = "none";
        $proveedoresContainer.style.display = "block";
        //$ordersContainer.style.display = "none";
        $btnProfile.classList.remove("btn-aside-active");
        $btnEmployees.classList.remove("btn-aside-active");
        $btnClients.classList.remove("btn-aside-active");
        $btnProveedores.classList.add("btn-aside-active");
        // $main.classList.remove("main-user-data");
        // $main.classList.add("main-purchases");
        $btnProfile.classList.remove("btn-aside-active:hover");
        $btnEmployees.classList.remove("btn-aside-active:hover");
        $btnClients.classList.remove("btn-aside-active:hover");
        $btnProveedores.classList.add("btn-aside-active:hover");
        //$btnOrders.classList.remove("btn-aside-active");
      });
    </script>
    <script
      src="{{url_for('static', filename='js/main_modify_admin.js')}}"
      type="module"
    ></script>
    <script
      src="{{url_for('static', filename='js/main_filter_users.js')}}"
      type="module"
    ></script>
  </body>
</html>
